CREATE COMPUTE MODULE app1_Compute
    CREATE FUNCTION Main() RETURNS BOOLEAN
    BEGIN
        -- CALL CopyMessageHeaders(); -- Uncomment if needed
        CALL CopyEntireMessage();
        RETURN TRUE;
    END;

    CREATE PROCEDURE CopyMessageHeaders() 
    BEGIN
        DECLARE I INTEGER 1;
        DECLARE J INTEGER;
        SET J = CARDINALITY(InputRoot.*[]);
        WHILE I < J DO
            SET OutputRoot.*[I] = InputRoot.*[I];
            SET I = I + 1;
        END WHILE;
    END;

    CREATE PROCEDURE CopyEntireMessage() 
    BEGIN
        DECLARE result CHARACTER;
        CALL CopyEntireMessage2('hello', 'world', result);
        -- Log result if needed, for example:
        -- SET Environment.Variables.myResult = result;
        
        SET OutputRoot = InputRoot;
    END;

    CREATE PROCEDURE CopyEntireMessage2(
        IN str CHARACTER,
        IN str2 CHARACTER,
        INOUT res CHARACTER
    ) 
    BEGIN
        SET res = str || ' ' || str2;
    END;

END MODULE;
CREATE FUNCTION CopyEntireMessage2(IN str CHARACTER, IN str2 CHARACTER) RETURNS CHARACTER
BEGIN
    RETURN str || ' ' || str2;
END;
DECLARE result CHARACTER;
SET result = CopyEntireMessage2('hello', 'world');